<!DOCTYPE html>
<html>
<head>
    <title>Reset Password - TickStock</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}">
</head>
<body>
    <div class="navbar">
        <h1>TickStock</h1>
        <div class="navbar-right">
            <span class="support-email">support@tickstock.com</span>
        </div>
    </div>
    <div class="container">
        <div class="auth-panel">
            <h2>Reset Password</h2>
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <ul class="flash-messages">
                        {% for message in messages %}
                            <li>{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            {% endwith %}
            <form method="POST" action="{{ url_for('reset_password', token=token) }}">
                {{ form.hidden_tag() }}
                <div class="form-group">
                    <label for="verification_code">
                        <strong>Verification Code</strong> 
                        <span class="verification-hint">(sent to your phone or email)</span>:
                    </label>
                    {{ form.verification_code(class="form-control", required=True, placeholder="Enter 6-digit code") }}
                    <small class="form-text text-muted">
                        Enter the 6-digit verification code we sent you. This is required to complete your password reset.
                    </small>
                </div>
                <div class="form-group">
                    <label for="new_password">New Password:</label>
                    {{ form.new_password(class="form-control", required=True) }}
                </div>
                <div class="form-group">
                    <label for="confirm_password">Confirm New Password:</label>
                    {{ form.confirm_password(class="form-control", required=True) }}
                </div>
                <div class="form-group">
                    <label>{{ form.captcha_response }} I am not a robot (stub)</label>
                    {% if form.captcha_response.errors %}
                        <span class="error">Please complete the CAPTCHA</span>
                    {% endif %}
                </div>
                {{ form.submit(class="btn btn-primary") }}
            </form>
            <p>Back to <a href="{{ url_for('login') }}">Login</a></p>
        </div>
    </div>
    <div class="status-bar">
        <div class="status-bar-left">
            <small>Â© 2025 TickStock</small>
        </div>
    </div>
</body>
</html>