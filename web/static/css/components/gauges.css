/*
===============================================================================
TICKSTOCK ACTIVITY COMPONENTS - VELOCITY DASHBOARD VERSION
===============================================================================

PURPOSE:
This file contains styling for the activity velocity dashboard and percentage bar.
Removed all Chart.js gauge and pressure bar styles.

COMPONENTS INCLUDED:
- Grid-stack compatibility styles
- Velocity dashboard styles (to be added from velocity-dashboard-styles artifact)
- Percentage bar restoration (Sprint 2C)
- Loading and error states
- Responsive behavior

DEPENDENCIES:
- variables.css (colors, spacing, typography)
- layout.css (container structure)

VERSION: 3.0.0 - Velocity Dashboard Version
LAST UPDATED: Cleaned for Activity Velocity Dashboard
===============================================================================
*/

/*
===============================================================================
GRID-STACK COMPATIBILITY
===============================================================================
*/

/* Grid-stack item base styles */
.grid-stack-item .velocity-dashboard-container {
    /* Functional styles only */
    padding: 0;
    position: relative !important;
    overflow: visible !important;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
}

/* Universe-specific borders on grid items */
.grid-stack-item[data-gs-id="core-gauge"] {
    border-left: 3px solid #2196f3;
}

/* PERCENTAGE BAR IN GRID-STACK */
.grid-stack-item .bar-row.percentage-bars {
    width: 100%;
    height: 100%;
    margin: 0;
    display: flex;
    align-items: center;
    padding: var(--spacing-md, 16px);
    box-sizing: border-box;
}

.grid-stack-item .unified-bar {
    width: 100%;
}

/* Ensure loading states work within grid items */
.grid-stack-item.loading .velocity-dashboard-container {
    opacity: 0.5;
}

.grid-stack-item.loading::after {
    content: 'Loading activity data...';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: var(--color-background-primary, #fff);
    padding: var(--spacing-md, 16px);
    border-radius: var(--border-radius-md, 6px);
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    z-index: 10;
}

/*
===============================================================================
UNIFIED PERCENTAGE BAR - MARKET BREADTH INDICATOR
===============================================================================
*/

/* Grid-stack container adjustments */
.grid-stack-item[data-gs-id="percentage-bar"] {
    min-height: 80px; /* Ensure minimum height for title + bar */
}

.grid-stack-item[data-gs-id="percentage-bar"] .grid-stack-item-content {
    padding: 12px 16px; /* Balanced padding */
    display: flex;
    flex-direction: column;
    height: 100%;
    box-sizing: border-box;
}

/* Percentage bar section wrapper */
.percentage-bar-section {
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

/* Title styling */
.percentage-bar-section h3 {
    margin: 0 0 12px 0;
    font-size: 0.9rem;
    text-align: left;
    flex-shrink: 0;
    color: var(--color-text-primary, #333);
    font-weight: var(--font-weight-bold, 700);
}

/* Bar row container */
.bar-row.percentage-bars {
    width: 100%;
    height: auto;
    margin: 0;
    display: flex;
    align-items: center;
    box-sizing: border-box;
}

/* Main unified bar */
.unified-bar {
    width: 100%;
    height: 24px; /* Slightly larger for better visibility */
    background-color: #ffffff;
    border-radius: 12px; /* More modern rounded look */
    position: relative;
    overflow: hidden;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
    border: 1px solid #e0e0e0;
}

/* Low fill (left side) */
.low-fill {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: linear-gradient(90deg, #f44336 0%, #e53935 100%);
    z-index: 1;
    transition: width 0.3s ease-out;
}

/* High fill (right side) */
.high-fill {
    position: absolute;
    top: 0;
    right: 0;
    height: 100%;
    background: linear-gradient(90deg, #43a047 0%, #4caf50 100%);
    z-index: 1;
    transition: width 0.3s ease-out;
}

/* Labels */
.high-label, .low-label {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    align-items: center;
    color: white;
    font-size: 11px;
    font-weight: 600;
    text-shadow: 0 1px 2px rgba(0,0,0,0.4);
    pointer-events: none;
    z-index: 2;
    line-height: 1;
    white-space: nowrap;
}

.high-label {
    right: 8px;
}

.low-label {
    left: 8px;
}

/* Smooth updating effect */
.high-fill.smooth-updating,
.low-fill.smooth-updating {
    filter: brightness(1.05);
}

/*
===============================================================================
VELOCITY DASHBOARD STYLES
===============================================================================
INSERT velocity-dashboard-styles.css content here or link separately
*/

/*
===============================================================================
RESPONSIVE ADJUSTMENTS
===============================================================================
*/

/* Tablet adjustments */
@media (max-width: 1024px) {
    .grid-stack-item[data-gs-id="core-gauge"] {
        /* Grid-stack will handle positioning */
    }
}

/* Mobile adjustments */
@media (max-width: 768px) {
    /* Grid-stack will be disabled, so components need to work standalone */
    .grid-stack-item .velocity-dashboard-container {
        /* Restore visual styling on mobile */
        background: var(--color-background-secondary, #f8f9fa);
        border: 1px solid var(--color-border, #e0e0e0);
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .grid-stack-item[data-gs-id="core-gauge"]{
        margin-bottom: var(--spacing-md, 16px);
    }
    
    /* Restore universe borders on mobile */
    .grid-stack-item.core-universe .velocity-dashboard-container {
        border-left: 3px solid #2196f3;
    }
    
    /* Percentage bar mobile adjustments */
    .grid-stack-item[data-gs-id="percentage-bar"] {
        min-height: 70px;
    }
    
    .percentage-bar-section h3 {
        font-size: 0.85rem;
        margin-bottom: 8px;
    }
    
    .unified-bar {
        height: 20px;
    }
    
    .high-label, .low-label {
        font-size: 10px;
    }
}

/* Small mobile adjustments */
@media (max-width: 480px) {
    .grid-stack-item[data-gs-id="percentage-bar"] .grid-stack-item-content {
        padding: 8px 12px;
    }
    
    .percentage-bar-section h3 {
        font-size: 0.8rem;
    }
}

/*
===============================================================================
LOADING & ERROR STATES
===============================================================================
*/

/* Loading state */
.velocity-dashboard-container.loading {
    opacity: 0.6;
}

/* Error state */
.velocity-dashboard-container.error {
    border-color: var(--color-error, #f44336);
}

/*
===============================================================================
ACCESSIBILITY ENHANCEMENTS
===============================================================================
*/

/* High contrast mode support */
@media (prefers-contrast: high) {
    .unified-bar {
        border: 2px solid var(--color-text-primary, #333);
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .high-fill,
    .low-fill {
        transition: none;
    }
}

/*
===============================================================================
PRINT STYLES
===============================================================================
*/

@media print {
    .velocity-dashboard-container {
        border: 1px solid #000;
    }
    
    .high-label, .low-label {
        color: #000 !important;
    }
}